webpackJsonp([4,7],{9:function(e,t,s){m=s(3),p=s(25),persist=s(4),passFail=s(17),tabbed=s(12);var o=s(18),i=s(19),a=function(){var e={data:{selectedItem:"create",tabs:[{name:"create",content:i},{name:"list",content:o}]},controller:function(t){this.data=e.data,this.actions=persist.model("procs"),this.list=this.actions.getList(),this.storesList=persist.model("stores").getList(),p({procs:this.list}),this.data.selectedItem=t.sub||e.data.selectedItem,this.changeTab=function(e){this.data.selectedItem=e,m.route("/"+t.top+"/"+e)}.bind(this)},view:function(e){var t={tabs:e.data.tabs,key:e.data.selectedItem,changeTab:e.changeTab};return m("div",{},m.module(tabbed,t,{list:e.list,mode:"add",storesList:e.storesList,actions:e.actions}))}};return e};e.exports=a},12:function(e,t,s){m=s(3),utils=s(5);var o={controller:function(e,t){this.tabs=e.tabs,this.changeTab=e.changeTab,this.mod=o.choose(e.key,e.tabs,t)},view:function(e,t){return m(".tabbed",m(".tabs",[o.tabs({tabs:e.tabs,selectedItem:t.key,onchange:e.changeTab})]),m("section",e.mod))}};o.tabs=function(e){return m("ul",e.tabs.map(function(t){return m("li",[o.tab(e,t.name)])}))},o.tab=function(e,t){return m("a",{"class":e.selectedItem==t?"selected":"",onclick:e.onchange.bind(this,t)},t)},o.choose=function(e,t,s){var o;t.forEach(function(t,i){return t.name==e&&(void 0===s.key&&(s.key=i),o=t.content)});var i=utils.isFunction(o)?o():o;return m.module(i,s)},e.exports=o},17:function(e,t,s){m=s(3);var o=function(){var e={};return e.model={elementType:"button",className:".messages"},e.controller=function(t){this.elementType=t.elementType?t.elementType:e.model.elementType,this.className=t.className?t.className:e.model.className,this.message=t.message,this.pass=t.pass,this.fail=t.fail},e.view=function(e){var t=e.pass()?e.message.pass:e.fail()?e.message.fail:"",s=e.pass()?"success":"error";return t?m(e.elementType+e.className,{"class":s},t):m("")},e};e.exports=o},18:function(e){var t=function(){var e={name:"procs"};return e.controller=function(){this[e.name]=p.getState()[e.name],this.title=e.name,this.showJson=!1,this.showHide=function(e){this.showJson=this.showJson==e?0:e}.bind(this)},e.view=function(t,s){return m("ul."+e.name+"-list",{},m("h3",t.title),Object.keys(s.list).map(function(e){var o={};o[e]=s.list[e];var i=JSON.stringify(o);return m("li",{title:i,onclick:t.showHide.bind(this,e)},e,t.showJson==e?m("textarea.json",i):"")}))},e};e.exports=t},19:function(e,t,s){function o(e){return{onchange:function(t){e[t.target.id]?e[t.target.id](t.target.value):""}}}var i=s(27),a=s(28);form=function(){var e={};return e.data={getData:function(e){return{name:m.prop(e.name||""),store:m.prop(e.store||""),query:m.prop(e.queries||""),code:m.prop(e.code||""),parms:m.prop(e.parms||"")}}},e.model={},e.model.storeList={"default":"select defined store"},e.controller=function(t){this.mode=t.mode,this.actions=t.actions,this.stores=t.storesList,data={},"edit"==this.mode&&t.name&&(data=p.getStoredProc(t.name),data.name=t.name),this.model=e.data.getData(data),this.storesList=Object.keys(this.stores),this.storesList.unshift(e.model.storeList.default),this.list=this.actions.getList(),p({procs:this.list}),this.remove=function(){var e={procs:{}};e.procs[this.model.name()]=null,p(e),delete this.list[this.model.name()],this.actions.saveList(this.list)}.bind(this),this.pass=m.prop(""),this.fail=m.prop(""),this.save=function(){this.model.name()&&this.model.code()&&this.model.query()?(this.list[this.model.name()]={queries:"string"==typeof this.model.query()?this.model.query().split(","):this.model.query(),code:this.model.code(),parms:this.model.parms()},this.actions.saveList(this.list),p({procs:this.list}),p.proc(this.model.name(),this.model.store(),this.list[this.model.name()].queries,this.model.code(),this.model.parms())):this.fail(!0)}.bind(this)},e.view=function(e){return m(".form",o(e.model),m.module(passFail(),{pass:e.pass,fail:e.fail,message:{pass:"yay!",fail:"boo!"}}),e.mode.toUpperCase()+" PROC - p.proc(procName|null,StoreName|data|null,jsonPathQueryNames|query(s),code,parms)",[m("input#name[placeholder='Proc Name']",{value:e.model.name()}),a(e.storesList,e.model.store),m("input#query[placeholder='Queries']",{value:e.model.query()}),m("textarea#code[placeholder='JS Code']",{value:e.model.code()}),m.module(i,{parms:e.model.parms}),m("button",{onclick:e.save},"Save"),"edit"==e.mode?m("button",{onclick:e.remove},"Remove"):""])},e},e.exports=form},27:function(e,t,s){function o(e,t){return m(".parms.row",[m("div.name",m("input[placeholder='Name']",{onchange:m.withAttr("value",e()[t].name),value:e()[t].name()})),m("div.value",m("input[placeholder='Value']",{onchange:m.withAttr("value",e()[t].value),value:e()[t].value()})),m("button",{onclick:function(t){i.model.remove(e,t)}.bind(null,t)},"-")])}m=s(3);var i={};i.model={remove:function(e,t){e().splice(t,1)},listToParms:function(e){var t={};return e().forEach(function(e){""!=e.name()?t[e.name()]=e.value():null}),t},parmsToList:function(e,t){for(var s in e())t().push({name:m.prop(s),value:m.prop(e()[s])})},addOne:function(e){e().push({name:m.prop(""),value:m.prop("")})}},i.controller=function(e){this.parms=e.parms,this.list=m.prop([]),this.show=e.show||0,i.model.parmsToList(this.parms,this.list),0==this.list().length?i.model.addOne(this.list):null},i.view=function(e){return m(".parms",{onchange:function(){e.parms(i.model.listToParms(e.list))}},"Parms",m("button",{onclick:function(){i.model.addOne(e.list)}},"+"),e.show?m("button",{onclick:function(){var t=JSON.stringify(i.model.listToParms(e.list));console.log(t)}},"show"):"",e.list().map(function(t,s){return o(e.list,s)}))},e.exports=i},28:function(e,t,s){m=s(3);var o=function(e,t){return m("label.select",m("select",{onchange:m.withAttr("value",t),value:t()},[e.map(function(e,t){return m("option",{value:0==t?"":e,innerHTML:e})})]))};e.exports=o}});