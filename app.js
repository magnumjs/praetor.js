!function e(t,r,n){function o(s,i){if(!r[s]){if(!t[s]){var l="function"==typeof require&&require;if(!i&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return o(r?r:e)},u,u.exports,e,t,r,n)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({"./src/scripts/app.js":[function(e){function t(e,t){var r=(t||{}).style,n=[{text:"Simple Demo",type:demo.demo},{text:"Create a stateful map of stores",type:app.store}];return e.onchange=function(){e.type=n[e.id()].type},"select"==r?m("select.silver",{onchange:function(){e.id(this.selectedIndex),e.type=n[e.id()].type}},[n.map(function(e,t){return m("option",{value:t,innerHTML:e.text})})]):[m("ol",n.map(function(t,r){return m("li",{key:r},m("a.action",{onclick:function(t){e.type=t,e.id(r)}.bind(this,t.type)},t.text))}))]}m=e("mithril"),modal=e("./components/modal"),app=e("./modules/app-modules"),demo=e("./modules/demo"),app.controller=function(){this.id=m.prop(0),this.welcomeMessage=m(".content",[m(".panel","Welcome to the PraetorJS administration editor demo page!",[m("p","We will walk through some simple examples to demonstrate the way you can create and recall procedures"),m("p","Check out the tools in the menu to the left."),m('a[href="http://goessner.net/articles/JsonPath/"]',"JSONPath reference to create queries.")])])},app.view=function(e){return m(".container",[m(".nav",[m(".welcome",[m("h1","Praetor Admin Editor"),m("h3",{title:"reference procs to manipulate data in pre-determined ways"},"JSON Path Stored Procedures"),t(e,{style:"select"}),m("button.silver",{onclick:e.onchange},"Go"),m('a[href="https://github.com/magnumjs/praetor.js"]',"PraetorJS gitHub")])]),e.type?m("p.content",{key:e.id()},e.type()):e.welcomeMessage])},m.module(document.body,app)},{"./components/modal":"/Users/mglazer/Documents/code/praetor.js/src/scripts/components/modal.js","./modules/app-modules":"/Users/mglazer/Documents/code/praetor.js/src/scripts/modules/app-modules.js","./modules/demo":"/Users/mglazer/Documents/code/praetor.js/src/scripts/modules/demo.js",mithril:"/Users/mglazer/Documents/code/praetor.js/node_modules/mithril/mithril.js"}],"/Users/mglazer/Documents/code/praetor.js/node_modules/browserify/node_modules/vm-browserify/index.js":[function(require,module,exports){function Context(){}var indexOf=require("indexof"),Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(e){return this instanceof Script?(this.code=e,void 0):new Script(e)};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,n=r.eval,o=r.execScript;!n&&o&&(o.call(r,"null"),n=r.eval),forEach(Object_keys(e),function(t){r[t]=e[t]}),forEach(globals,function(t){e[t]&&(r[t]=e[t])});var a=Object_keys(r),s=n.call(r,this.code);return forEach(Object_keys(r),function(t){(t in e||-1===indexOf(a,t))&&(e[t]=r[t])}),forEach(globals,function(t){t in e||defineProp(e,t,r[t])}),document.body.removeChild(t),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),r=this.runInContext(t);return forEach(Object_keys(t),function(r){e[r]=t[r]}),r},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))}}),exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(r){t[r]=e[r]}),t}},{indexof:"/Users/mglazer/Documents/code/praetor.js/node_modules/browserify/node_modules/vm-browserify/node_modules/indexof/index.js"}],"/Users/mglazer/Documents/code/praetor.js/node_modules/browserify/node_modules/vm-browserify/node_modules/indexof/index.js":[function(e,t){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],"/Users/mglazer/Documents/code/praetor.js/node_modules/mithril/mithril.js":[function(e,t){var r=function n(e,t){function r(e){C=e.document,_=e.location,A=e.cancelAnimationFrame||e.clearTimeout,T=e.requestAnimationFrame||e.setTimeout}function o(){var e,t=[].slice.call(arguments),r=!(null==t[1]||I.call(t[1])!==P||"tag"in t[1]||"view"in t[1]||"subtree"in t[1]),n=r?t[1]:{},o="class"in n?"class":"className",a={tag:"div",attrs:{}},s=[];if(I.call(t[0])!=D)throw new Error("selector in m(selector, attrs, children) should be a string");for(;e=z.exec(t[0]);)if(""===e[1]&&e[2])a.tag=e[2];else if("#"===e[1])a.attrs.id=e[2];else if("."===e[1])s.push(e[2]);else if("["===e[3][0]){var i=R.exec(e[3]);a.attrs[i[1]]=i[3]||(i[2]?"":!0)}s.length>0&&(a.attrs[o]=s.join(" "));var l=r?t.slice(2):t.slice(1);a.children=1===l.length&&I.call(l[0])===q?l[0]:l;for(var c in n)c===o?""!==n[c]&&(a.attrs[c]=(a.attrs[c]||"")+" "+n[c]):a.attrs[c]=n[c];return a}function a(e,r,n,c,d,m,f,p,h,g,v){try{(null==d||null==d.toString())&&(d="")}catch(y){d=""}if("retain"===d.subtree)return m;var b=I.call(m),w=I.call(d);if(null==m||b!==w){if(null!=m)if(n&&n.nodes){var x=p-c,j=x+(w===q?d:m.nodes).length;l(n.nodes.slice(x,j),n.slice(x,j))}else m.nodes&&l(m.nodes,m);m=new d.constructor,m.tag&&(m={}),m.nodes=[]}if(w===q){for(var S=0,O=d.length;O>S;S++)I.call(d[S])===q&&(d=d.concat.apply([],d),S--,O=d.length);for(var N=[],k=m.length===d.length,E=0,J=1,_=2,T=3,A={},z=[],R=!1,S=0;S<m.length;S++)m[S]&&m[S].attrs&&null!=m[S].attrs.key&&(R=!0,A[m[S].attrs.key]={action:J,index:S});if(R){d.indexOf(null)>-1&&(d=d.filter(function(e){return null!=e}));var M=!1;if(d.length!=m.length)M=!0;else for(var $,B,S=0;$=m[S],B=d[S];S++)if($.attrs&&B.attrs&&$.attrs.key!=B.attrs.key){M=!0;break}if(M){for(var S=0,O=d.length;O>S;S++)if(d[S]&&d[S].attrs)if(null!=d[S].attrs.key){var F=d[S].attrs.key;A[F]=A[F]?{action:T,index:S,from:A[F].index,element:m.nodes[A[F].index]||C.createElement("div")}:{action:_,index:S}}else z.push({index:S,element:e.childNodes[S]||C.createElement("div")});var H=[];for(var Q in A)H.push(A[Q]);for(var G,K=H.sort(s),V=new Array(m.length),S=0;G=K[S];S++){if(G.action===J&&(l(m[G.index].nodes,m[G.index]),V.splice(G.index,1)),G.action===_){var W=C.createElement("div");W.key=d[G.index].attrs.key,e.insertBefore(W,e.childNodes[G.index]||null),V.splice(G.index,0,{attrs:{key:d[G.index].attrs.key},nodes:[W]})}G.action===T&&(e.childNodes[G.index]!==G.element&&null!==G.element&&e.insertBefore(G.element,e.childNodes[G.index]||null),V[G.index]=m[G.from])}for(var S=0,O=z.length;O>S;S++){var G=z[S];e.insertBefore(G.element,e.childNodes[G.index]||null),V[G.index]=m[G.index]}m=V,m.nodes=new Array(e.childNodes.length);for(var Y,S=0;Y=e.childNodes[S];S++)m.nodes[S]=Y}}for(var S=0,Z=0,O=d.length;O>S;S++){var et=a(e,r,m,p,d[S],m[Z],f,p+E||E,h,g,v);et!==t&&(et.nodes.intact||(k=!1),E+=et.$trusted?(et.match(/<[^\/]|\>\s*[^<]|&/g)||[]).length:I.call(et)===q?et.length:1,m[Z++]=et)}if(!k){for(var S=0,O=d.length;O>S;S++)null!=m[S]&&N.push.apply(N,m[S].nodes);for(var tt,S=0;tt=m.nodes[S];S++)null!=tt.parentNode&&N.indexOf(tt)<0&&l([tt],[m[S]]);d.length<m.length&&(m.length=d.length),m.nodes=N}}else if(null!=d&&w===P){if(d.view){var nt,ot=d,at=m.controller||new(ot.controller||function(){});if(d=0==rt?ot.view(at):{tag:"placeholder"},at.onunload&&X.push({controller:at,handler:at.onunload}),!d.tag)throw new Error("Component template must return a virtual element, not an array, string, etc.")}d.attrs||(d.attrs={}),m.attrs||(m.attrs={});var st=Object.keys(d.attrs),it=st.length>("key"in d.attrs?1:0);if((d.tag!=m.tag||st.join()!=Object.keys(m.attrs).join()||d.attrs.id!=m.attrs.id||d.attrs.key!=m.attrs.key||"all"==o.redraw.strategy()&&m.configContext&&m.configContext.retain!==!0||"diff"==o.redraw.strategy()&&m.configContext&&m.configContext.retain===!1)&&(m.nodes.length&&l(m.nodes),m.configContext&&typeof m.configContext.onunload===U&&m.configContext.onunload(),m.controller&&typeof m.controller.onunload===U&&m.controller.onunload({preventDefault:function(){}})),I.call(d.tag)!=D)return;var tt,lt=0===m.nodes.length;if(d.attrs.xmlns?g=d.attrs.xmlns:"svg"===d.tag?g="http://www.w3.org/2000/svg":"math"===d.tag&&(g="http://www.w3.org/1998/Math/MathML"),lt){if(tt=d.attrs.is?g===t?C.createElement(d.tag,d.attrs.is):C.createElementNS(g,d.tag,d.attrs.is):g===t?C.createElement(d.tag):C.createElementNS(g,d.tag),m={tag:d.tag,attrs:it?i(tt,d.tag,d.attrs,{},g):d.attrs,children:null!=d.children&&d.children.length>0?a(tt,d.tag,t,t,d.children,m.children,!0,0,d.attrs.contenteditable?tt:h,g,v):d.children,nodes:[tt]},at&&(m.controller=at,at.onunload&&at.onunload.$old&&(at.onunload=at.onunload.$old),rt&&at.onunload)){var nt=at.onunload;at.onunload=function(){},at.onunload.$old=nt}m.children&&!m.children.nodes&&(m.children.nodes=[]),"select"===d.tag&&d.attrs.value&&i(tt,d.tag,{value:d.attrs.value},{},g),e.insertBefore(tt,e.childNodes[p]||null)}else tt=m.nodes[0],it&&i(tt,d.tag,d.attrs,m.attrs,g),m.children=a(tt,d.tag,t,t,d.children,m.children,!1,0,d.attrs.contenteditable?tt:h,g,v),m.nodes.intact=!0,f===!0&&null!=tt&&e.insertBefore(tt,e.childNodes[p]||null);if(typeof d.attrs.config===U){var ct=m.configContext=m.configContext||{retain:"diff"==o.redraw.strategy()},ut=function(e,t){return function(){return e.attrs.config.apply(e,t)}};v.push(ut(d,[tt,!lt,ct,m]))}}else if(typeof w!=U){var N;0===m.nodes.length?(d.$trusted?N=u(e,p,d):(N=[C.createTextNode(d)],e.nodeName.match(L)||e.insertBefore(N[0],e.childNodes[p]||null)),m="string number boolean".indexOf(typeof d)>-1?new d.constructor(d):d,m.nodes=N):m.valueOf()!==d.valueOf()||f===!0?(N=m.nodes,h&&h===C.activeElement||(d.$trusted?(l(N,m),N=u(e,p,d)):"textarea"===r?e.value=d:h?h.innerHTML=d:((1===N[0].nodeType||N.length>1)&&(l(m.nodes,m),N=[C.createTextNode(d)]),e.insertBefore(N[0],e.childNodes[p]||null),N[0].nodeValue=d)),m=new d.constructor(d),m.nodes=N):m.nodes.intact=!0}return m}function s(e,t){return e.action-t.action||e.index-t.index}function i(e,t,r,n,o){for(var a in r){var s=r[a],i=n[a];if(a in n&&i===s)"value"===a&&"input"===t&&e.value!=s&&(e.value=s);else{n[a]=s;try{if("config"===a||"key"==a)continue;if(typeof s===U&&0===a.indexOf("on"))e[a]=d(s,e);else if("style"===a&&null!=s&&I.call(s)===P){for(var l in s)(null==i||i[l]!==s[l])&&(e.style[l]=s[l]);for(var l in i)l in s||(e.style[l]="")}else null!=o?"href"===a?e.setAttributeNS("http://www.w3.org/1999/xlink","href",s):"className"===a?e.setAttribute("class",s):e.setAttribute(a,s):a in e&&"list"!==a&&"style"!==a&&"form"!==a&&"type"!==a?("input"!==t||e[a]!==s)&&(e[a]=s):e.setAttribute(a,s)}catch(c){if(c.message.indexOf("Invalid argument")<0)throw c}}}return n}function l(e,t){for(var r=e.length-1;r>-1;r--)if(e[r]&&e[r].parentNode){try{e[r].parentNode.removeChild(e[r])}catch(n){}t=[].concat(t),t[r]&&c(t[r])}0!=e.length&&(e.length=0)}function c(e){if(e.configContext&&typeof e.configContext.onunload===U&&(e.configContext.onunload(),e.configContext.onunload=null),e.controller&&typeof e.controller.onunload===U&&e.controller.onunload({preventDefault:function(){}}),e.children)if(I.call(e.children)===q)for(var t,r=0;t=e.children[r];r++)c(t);else e.children.tag&&c(e.children)}function u(e,t,r){var n=e.childNodes[t];if(n){var o=1!=n.nodeType,a=C.createElement("span");o?(e.insertBefore(a,n||null),a.insertAdjacentHTML("beforebegin",r),e.removeChild(a)):n.insertAdjacentHTML("beforebegin",r)}else e.insertAdjacentHTML("beforeend",r);for(var s=[];e.childNodes[t]!==n;)s.push(e.childNodes[t]),t++;return s}function d(e,t){return function(r){r=r||event,o.redraw.strategy("diff"),o.startComputation();try{return e.call(t,r)}finally{nt()}}}function m(e){var t=B.indexOf(e);return 0>t?B.push(e)-1:t}function f(e){var t=function(){return arguments.length&&(e=arguments[0]),e};return t.toJSON=function(){return e},t}function p(e,t){var r=function(){return(e.controller||function(){}).apply(this,t)||this},n=function(r){arguments.length>1&&(t=t.concat([].slice.call(arguments,1)));var n=e.view.apply(e,t?[r].concat(t):[r]);return t[0]&&null!=t[0].key&&(n.attrs.key=t[0].key),n},o={controller:r,view:n};return t[0]&&null!=t[0].key&&(o.attrs={key:t[0].key}),o}function h(){for(var e,t=0;e=Q[t];t++)if(K[t]){var r=G[t].controller&&G[t].controller.$$args?[K[t]].concat(G[t].controller.$$args):[K[t]];o.render(e,G[t].view?G[t].view(K[t],r):tt())}Y&&(Y(),Y=null),V=null,W=new Date,o.redraw.strategy("diff")}function g(e){return e.slice(st[o.route.mode].length)}function v(e,t,r){ot={};var n=r.indexOf("?");-1!==n&&(ot=x(r.substr(n+1,r.length)),r=r.substr(0,n));var a=Object.keys(t),s=a.indexOf(r);if(-1!==s)return o.module(e,t[a[s]]),!0;for(var i in t){if(i===r)return o.module(e,t[i]),!0;var l=new RegExp("^"+i.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(l.test(r))return r.replace(l,function(){for(var r=i.match(/:[^\/]+/g)||[],n=[].slice.call(arguments,1,-2),a=0,s=r.length;s>a;a++)ot[r[a].replace(/:|\./g,"")]=decodeURIComponent(n[a]);o.module(e,t[i])}),!0}}function y(e){if(e=e||event,!e.ctrlKey&&!e.metaKey&&2!==e.which){e.preventDefault?e.preventDefault():e.returnValue=!1;for(var t=e.currentTarget||e.srcElement,r="pathname"===o.route.mode&&t.search?x(t.search.slice(1)):{};t&&"A"!=t.nodeName.toUpperCase();)t=t.parentNode;o.route(t[o.route.mode].slice(st[o.route.mode].length),r)}}function b(){"hash"!=o.route.mode&&_.hash?_.hash=_.hash:e.scrollTo(0,0)}function w(e,t){var r=[];for(var n in e){var o=t?t+"["+n+"]":n,a=e[n],s=I.call(a),i=null!=a&&s===P?w(a,o):s===q?a.map(function(e){return encodeURIComponent(o+"[]")+"="+encodeURIComponent(e)}).join("&"):encodeURIComponent(o)+"="+encodeURIComponent(a);r.push(i)}return r.join("&")}function x(e){for(var t=e.split("&"),r={},n=0,o=t.length;o>n;n++){var a=t[n].split("=");r[decodeURIComponent(a[0])]=a[1]?decodeURIComponent(a[1]):""}return r}function j(e){var r=m(e);l(e.childNodes,F[r]),F[r]=t}function S(e){var t=o.prop();return e.then(t),t.then=function(r,n){return e=e.then(r,n).then(t),t},t}function O(e,t){function r(e){d=e||c,f.map(function(e){d===l&&e.resolve(m)||e.reject(m)})}function n(e,t,r,n){if((null!=m&&I.call(m)===P||typeof m===U)&&typeof e===U)try{var a=0;e.call(m,function(e){a++||(m=e,t())},function(e){a++||(m=e,r())})}catch(s){o.deferred.onerror(s),m=s,r()}else n()}function a(){var c;try{c=m&&m.then}catch(f){return o.deferred.onerror(f),m=f,d=i,a()}n(c,function(){d=s,a()},function(){d=i,a()},function(){try{d===s&&typeof e===U?m=e(m):d===i&&"function"==typeof t&&(m=t(m),d=s)}catch(a){return o.deferred.onerror(a),m=a,r()}m===u?(m=TypeError(),r()):n(c,function(){r(l)},r,function(){r(d===s&&l)})})}var s=1,i=2,l=3,c=4,u=this,d=0,m=0,f=[];u.promise={},u.resolve=function(e){return d||(m=e,d=s,a()),this},u.reject=function(e){return d||(m=e,d=i,a()),this},u.promise.then=function(e,t){var r=new O(e,t);return d===l?r.resolve(m):d===c?r.reject(m):f.push(r),r.promise}}function N(e){return e}function k(r){if(!r.dataType||"jsonp"!==r.dataType.toLowerCase()){var n=new e.XMLHttpRequest;if(n.open(r.method,r.url,!0,r.user,r.password),n.onreadystatechange=function(){4===n.readyState&&(n.status>=200&&n.status<300?r.onload({type:"load",target:n}):r.onerror({type:"error",target:n}))},r.serialize===JSON.stringify&&r.data&&"GET"!==r.method&&n.setRequestHeader("Content-Type","application/json; charset=utf-8"),r.deserialize===JSON.parse&&n.setRequestHeader("Accept","application/json, text/*"),typeof r.config===U){var o=r.config(n,r);null!=o&&(n=o)}var a="GET"!==r.method&&r.data?r.data:"";if(a&&I.call(a)!=D&&a.constructor!=e.FormData)throw"Request data should be either be a string or FormData. Check the `serialize` option in `m.request`";return n.send(a),n}var s="mithril_callback_"+(new Date).getTime()+"_"+Math.round(1e16*Math.random()).toString(36),i=C.createElement("script");e[s]=function(n){i.parentNode.removeChild(i),r.onload({type:"load",target:{responseText:n}}),e[s]=t},i.onerror=function(){return i.parentNode.removeChild(i),r.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),e[s]=t,!1},i.onload=function(){return!1},i.src=r.url+(r.url.indexOf("?")>0?"&":"?")+(r.callbackKey?r.callbackKey:"callback")+"="+s+"&"+w(r.data||{}),C.body.appendChild(i)}function E(e,t,r){if("GET"===e.method&&"jsonp"!=e.dataType){var n=e.url.indexOf("?")<0?"?":"&",o=w(t);e.url=e.url+(o?n+o:"")}else e.data=r(t);return e}function J(e,t){var r=e.match(/:[a-z]\w+/gi);if(r&&t)for(var n=0;n<r.length;n++){var o=r[n].slice(1);e=e.replace(r[n],t[o]),delete t[o]}return e}var C,_,T,A,P="[object Object]",q="[object Array]",D="[object String]",U="function",I={}.toString,z=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,R=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,L=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/;r(e);var M,$={appendChild:function(e){M===t&&(M=C.createElement("html")),C.documentElement&&C.documentElement!==e?C.replaceChild(e,C.documentElement):C.appendChild(e),this.childNodes=C.childNodes},insertBefore:function(e){this.appendChild(e)},childNodes:[]},B=[],F={};o.render=function(e,r,n){var o=[];if(!e)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var s=m(e),i=e===C,c=i||e===C.documentElement?$:e;i&&"html"!=r.tag&&(r={tag:"html",attrs:{},children:r}),F[s]===t&&l(c.childNodes),n===!0&&j(e),F[s]=a(c,null,t,t,r,F[s],!1,0,null,t,o);for(var u=0,d=o.length;d>u;u++)o[u]()},o.trust=function(e){return e=new String(e),e.$trusted=!0,e},o.prop=function(e){return(null!=e&&I.call(e)===P||typeof e===U)&&typeof e.then===U?S(e):f(e)};var H,Q=[],G=[],K=[],V=null,W=0,Y=null,X=[],Z=16;o.module=function(e,t){if(!e)throw new Error("Please ensure the DOM element exists before rendering a template into it.");if(e.view)return p(e,[].slice.call(arguments,1));var r=Q.indexOf(e);0>r&&(r=Q.length);for(var n,a=!1,s={preventDefault:function(){a=!0}},i=0;n=X[i];i++)n.handler(s),n.controller.onunload=null;if(a)for(var n,i=0;n=X[i];i++)n.controller.onunload=n.handler;else X=[];if(K[r]&&typeof K[r].onunload===U&&K[r].onunload(s),!a){o.redraw.strategy("all"),o.startComputation(),Q[r]=e,arguments.length>2&&(t=p(t,[].slice.call(arguments,2)));var l=H=t=t||{},c=t.controller||function(){},u=new c;return l===H&&(K[r]=u,G[r]=t),nt(),K[r]}};var et=!1;o.redraw=function(t){et||(et=!0,V&&t!==!0?(new Date-W>Z||T===e.requestAnimationFrame)&&(V>0&&A(V),V=T(h,Z)):(h(),V=T(function(){V=null},Z)),et=!1)},o.redraw.strategy=o.prop();var tt=function(){return""},rt=0;o.startComputation=function(){rt++},o.endComputation=function(){rt=Math.max(rt-1,0),0===rt&&o.redraw()};var nt=function(){"none"==o.redraw.strategy()?(rt--,o.redraw.strategy("diff")):o.endComputation()};o.withAttr=function(e,t){return function(r){r=r||event;var n=r.currentTarget||this;t(e in n?n[e]:n.getAttribute(e))}};var ot,at,st={pathname:"",hash:"#",search:"?"},it=function(){};return o.route=function(){if(0===arguments.length)return at;if(3===arguments.length&&I.call(arguments[1])===D){var t=arguments[0],r=arguments[1],n=arguments[2];it=function(e){var a=at=g(e);v(t,n,a)||o.route(r,!0)};var a="hash"===o.route.mode?"onhashchange":"onpopstate";e[a]=function(){var e=_[o.route.mode];"pathname"===o.route.mode&&(e+=_.search),at!=g(e)&&it(e)},Y=b,e[a]()}else if(arguments[0].addEventListener||arguments[0].attachEvent){{var s=arguments[0];arguments[1],arguments[2]}s.href=("pathname"!==o.route.mode?_.pathname:"")+st[o.route.mode]+this.attrs.href,s.addEventListener?(s.removeEventListener("click",y),s.addEventListener("click",y)):(s.detachEvent("onclick",y),s.attachEvent("onclick",y))}else if(I.call(arguments[0])===D){var i=at;at=arguments[0];var l=arguments[1]||{},c=at.indexOf("?"),u=c>-1?x(at.slice(c+1)):{};for(var d in l)u[d]=l[d];var m=w(u),f=c>-1?at.slice(0,c):at;m&&(at=f+(-1===f.indexOf("?")?"?":"&")+m);var p=(3===arguments.length?arguments[2]:arguments[1])===!0||i===arguments[0];e.history.pushState?(Y=function(){e.history[p?"replaceState":"pushState"](null,C.title,st[o.route.mode]+at),b()},it(st[o.route.mode]+at)):(_[o.route.mode]=at,it(st[o.route.mode]+at))}},o.route.param=function(e){if(!ot)throw new Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return ot[e]},o.route.mode="search",o.deferred=function(){var e=new O;return e.promise=S(e.promise),e},o.deferred.onerror=function(e){if("[object Error]"===I.call(e)&&!e.constructor.toString().match(/ Error/))throw e},o.sync=function(e){function t(e,t){return function(o){return s[e]=o,t||(r="reject"),0===--a&&(n.promise(s),n[r](s)),o}}var r="resolve",n=o.deferred(),a=e.length,s=new Array(a);if(e.length>0)for(var i=0;i<e.length;i++)e[i].then(t(i,!0),t(i,!1));else n.resolve([]);return n.promise},o.request=function(e){e.background!==!0&&o.startComputation();var t=o.deferred(),r=e.dataType&&"jsonp"===e.dataType.toLowerCase(),n=e.serialize=r?N:e.serialize||JSON.stringify,a=e.deserialize=r?N:e.deserialize||JSON.parse,s=e.extract||function(e){return 0===e.responseText.length&&a===JSON.parse?null:e.responseText};return e.url=J(e.url,e.data),e=E(e,e.data,n),e.onload=e.onerror=function(r){try{r=r||event;var n=("load"===r.type?e.unwrapSuccess:e.unwrapError)||N,i=n(a(s(r.target,e)),r.target);if("load"===r.type)if(I.call(i)===q&&e.type)for(var l=0;l<i.length;l++)i[l]=new e.type(i[l]);else e.type&&(i=new e.type(i));t["load"===r.type?"resolve":"reject"](i)}catch(r){o.deferred.onerror(r),t.reject(r)}e.background!==!0&&o.endComputation()},k(e),t.promise(e.initialValue),t.promise},o.deps=function(t){return r(e=t||e),e},o.deps.factory=n,o}("undefined"!=typeof window?window:{});"undefined"!=typeof t&&null!==t&&t.exports?t.exports=r:"function"==typeof define&&define.amd&&define(function(){return r})},{}],"/Users/mglazer/Documents/code/praetor.js/node_modules/praetor/node_modules/jsonpath/lib/jsonpath.js":[function(require,module,exports){!function(require){"use strict";function push(e,t){return e=e.slice(),e.push(t),e}function unshift(e,t){return t=t.slice(),t.unshift(e),t}function JSONPath(e,t,r){if(!(this instanceof JSONPath))try{return new JSONPath(e,t,r)}catch(n){if(!n.avoidNew)throw n;return n.value}e=e||{};var o=e.hasOwnProperty("json")&&e.hasOwnProperty("path");if(this.resultType=e.resultType&&e.resultType.toLowerCase()||"value",this.flatten=e.flatten||!1,this.wrap=e.hasOwnProperty("wrap")?e.wrap:!0,this.sandbox=e.sandbox||{},e.autostart!==!1){var a=this.evaluate(o?e.json:t,o?e.path:r);if(!a||"object"!=typeof reg)throw{avoidNew:!0,value:a,message:"JSONPath should not be called with 'new'"}}}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var isNode="undefined"!=typeof module&&!!module.exports,vm=isNode?require("vm"):{runInNewContext:function(expr,context){return eval(Object.keys(context).reduce(function(e,t){return"var "+t+"="+JSON.stringify(context[t])+";"+e},expr))}},cache={};JSONPath.prototype.evaluate=function(e,t){var r=this;if(this._obj=e,t&&e&&("value"===this.resultType||"path"===this.resultType)){var n=this._normalize(t);"$"===n[0]&&n.length>1&&n.shift();var o=this._trace(n,e,["$"]);return o=o.filter(function(e){return e&&!e.isParentSelector}),o.length?1!==o.length||this.wrap||Array.isArray(o[0].value)?o.reduce(function(e,t){var n=t[r.resultType];return"path"===r.resultType&&(n=r._asPath(n)),r.flatten&&Array.isArray(n)?e=e.concat(n):e.push(n),e},[]):o[0][this.resultType]||!1:this.wrap?[]:!1}},JSONPath.prototype._normalize=function(e){if(cache[e])return cache[e];var t=[],r=e.replace(/[\['](\??\(.*?\))[\]']/g,function(e,r){return"[#"+(t.push(r)-1)+"]"}).replace(/'?\.'?|\['?/g,";").replace(/(?:;)?(\^+)(?:;)?/g,function(e,t){return";"+t.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,""),n=r.split(";").map(function(e){var r=e.match(/#([0-9]+)/);return r&&r[1]?t[r[1]]:e});return cache[e]=n,cache[e]},JSONPath.prototype._asPath=function(e){var t,r,n=e,o="$";for(t=1,r=n.length;r>t;t++)o+=/^[0-9*]+$/.test(n[t])?"["+n[t]+"]":"['"+n[t]+"']";return o},JSONPath.prototype._trace=function(e,t,r){function n(e){i=i.concat(e)}var o=this;if(!e.length)return[{path:r,value:t}];var a=e[0],s=e.slice(1);if("^"===a)return r.length?[{path:r.slice(0,-1),expr:s,isParentSelector:!0}]:[];var i=[];if(t&&t.hasOwnProperty(a))n(this._trace(s,t[a],push(r,a)));else if("*"===a)this._walk(a,s,t,r,function(e,t,r,a,s){n(o._trace(unshift(e,r),a,s))});else if(".."===a)n(this._trace(s,t,r)),this._walk(a,s,t,r,function(e,t,r,a,s){"object"==typeof a[e]&&n(o._trace(unshift("..",r),a[e],push(s,e)))});else if("("===a[0])n(this._trace(unshift(this._eval(a,t,r[r.length],r),s),t,r));else if(0===a.indexOf("?("))this._walk(a,s,t,r,function(e,t,a,s,i){o._eval(t.replace(/^\?\((.*?)\)$/,"$1"),s[e],e,r)&&n(o._trace(unshift(e,a),s,i))});else if(a.indexOf(",")>-1){var l,c;for(l=a.split(","),c=0;c<l.length;c++)n(this._trace(unshift(l[c],s),t,r))}else/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(a)&&n(this._slice(a,s,t,r));return i.reduce(function(e,r){return e.concat(r.isParentSelector?o._trace(r.expr,t,r.path):[r])},[])},JSONPath.prototype._walk=function(e,t,r,n,o){var a,s,i;if(Array.isArray(r))for(a=0,s=r.length;s>a;a++)o(a,e,t,r,n);else if("object"==typeof r)for(i in r)r.hasOwnProperty(i)&&o(i,e,t,r,n)},JSONPath.prototype._slice=function(e,t,r,n){if(Array.isArray(r)){var o,a=r.length,s=e.split(":"),i=s[0]&&parseInt(s[0],10)||0,l=s[1]&&parseInt(s[1],10)||a,c=s[2]&&parseInt(s[2],10)||1;i=0>i?Math.max(0,i+a):Math.min(a,i),l=0>l?Math.max(0,l+a):Math.min(a,l);var u=[];for(o=i;l>o;o+=c)u=u.concat(this._trace(unshift(o,t),r,n));return u}},JSONPath.prototype._eval=function(e,t,r,n){if(!this._obj||!t)return!1;e.indexOf("@path")>-1&&(this.sandbox._$_path=this._asPath(n.concat([r])),e=e.replace(/@path/g,"_$_path")),e.indexOf("@")>-1&&(this.sandbox._$_v=t,e=e.replace(/@/g,"_$_v"));try{return vm.runInNewContext(e,this.sandbox)}catch(o){throw console.log(o),new Error("jsonPath: "+o.message+": "+e)}},JSONPath.eval=function(e,t,r){return JSONPath(r,e,t)},"undefined"==typeof module?(window.jsonPath={eval:JSONPath.eval},window.JSONPath=JSONPath):module.exports=JSONPath}("undefined"==typeof require?null:require)},{vm:"/Users/mglazer/Documents/code/praetor.js/node_modules/browserify/node_modules/vm-browserify/index.js"}],"/Users/mglazer/Documents/code/praetor.js/node_modules/praetor/praetor.js":[function(e,t){var r=function(e,r,n){"use strict";function o(e,t){for(var r in t)e[r]=e[r]===n?t[r]:e[r];return e}function a(e,t,r){var o=Function(t.codeBody);for(var a in t.parms)r[a]=r[a]===n?t.parms[a]:r[a];var s={results:e,params:r},i=o.apply(s);return i?i:s.results}function s(e,t,r){s.setOptions(r,t);var n=o(e,JSON.parse(JSON.stringify(u)));s.map(t,n)}var i="undefined"!=typeof t&&!!t.exports;if(r="undefined"!=typeof r?r:i&&e&&"function"==typeof e?e("jsonpath"):n,!r)throw Error("JSONPath is required: (https://github.com/s3u/JSONPath)");var l=function(e,t){for(var r in t)"object"!=typeof e[r]?e[r]=t[r]:"object"==typeof t[r]&&(e[r]=l(e[r],t[r]));return e},c={};c.stores={},c.queries={},c.procs={};var u=function(){return JSON.parse(JSON.stringify(c))}(),d={jsonPathOptions:{}},m={},f={},p="[object Object]",h={}.toString;return s.setOptions=function(e,t){m=e,s.settings(e,t)},s.getOptions=function(){return m},s.settings=function(e){return f=l(d,e)},s.map=function(e,t){return this.state=this.state||{},e&&h.call(e)!==p?(this.state[e]||(this.state[e]=t||JSON.parse(JSON.stringify(u))),this.state[e]):(this.state[s.id]=t||this.state[s.id]||c,this.state[s.id])},s.proc=function(e,t,n,o){var i=t.map(function(t){return r(s.settings().jsonPathOptions,e,t)}),l={parms:o,codeBody:n};return a(i,l,o)},s.setDataStore=function(e,t,r){s.map(r).stores[e]=t},s.getDataStore=function(e,t){return s.map(t).stores[e]},s.setJsonQuery=function(e,t,r,n){s.map(n).queries[e]={query:t,store:r}},s.getJsonQuery=function(e,t){return s.map(t).queries[e]},s.getJsonQueryResult=function(e,t){var n=s.getJsonQuery(e,t),o=s.getDataStore(n.store,t),a=r(s.settings().jsonPathOptions,o,n.query);return a},s.setStoredProc=function(e,t,r,n,o){s.map(o).procs[e]={namedQueries:t,codeBody:r,parms:n}},s.getStoredProc=function(e,t){return s.map(t).procs[e]},s.getStoredProcResult=function(e,t,r){var n=s.getStoredProc(e,r),o=[];return o=n.namedQueries.map(function(e){var t={};return t[e]=s.getJsonQueryResult(e,r),t}),a(o,n,t)},s.setState=function(e,t){s.map(e,t)},s.getState=function(e){return JSON.parse(JSON.stringify(s.map(e)))},s}("undefined"==typeof e?void 0:e,"undefined"==typeof jsonpath?"undefined"==typeof JSONPath?void 0:JSONPath:jsonpath);"undefined"!=typeof t&&null!==t&&t.exports?t.exports=r:"function"==typeof define&&define.amd&&define("",["jsonpath"],function(){return r})},{jsonpath:"/Users/mglazer/Documents/code/praetor.js/node_modules/praetor/node_modules/jsonpath/lib/jsonpath.js"}],"/Users/mglazer/Documents/code/praetor.js/src/scripts/components/modal.js":[function(e,t){m=e("mithril");var r=function(){function e(){return m("button[type=button].close-modal",{onclick:r.visible.bind(this,!1)},"Close modal")}function t(t){return[m(".modal",m(".wrapper",[t(),e()]))]}var r={};return r.visible=m.prop(!1),r.view=function(e){return r.visible()?t(e):""},r};t.exports=r},{mithril:"/Users/mglazer/Documents/code/praetor.js/node_modules/mithril/mithril.js"}],"/Users/mglazer/Documents/code/praetor.js/src/scripts/components/pass-fail.js":[function(e,t){m=e("mithril");var r=function(){var e={};return e.model={elementType:"button",className:".messages"},e.controller=function(t){this.elementType=t.elementType?t.elementType:e.model.elementType,this.className=t.className?t.className:e.model.className,this.message=t.message,this.pass=t.pass,this.fail=t.fail},e.view=function(e){var t=e.pass()?e.message.pass:e.fail()?e.message.fail:"",r=e.pass()?"success":"error";return t?m(e.elementType+e.className,{"class":r},t):m("")},e};t.exports=r},{mithril:"/Users/mglazer/Documents/code/praetor.js/node_modules/mithril/mithril.js"}],"/Users/mglazer/Documents/code/praetor.js/src/scripts/components/tabs.js":[function(e,t){m=e("mithril");var r={};r.types={OBJECT:"[object Object]",ARRAY:"[object Array]",STRING:"[object String]",FUNCTION:"function"},r.type={}.toString,r.isFunction=function(e){return typeof e===r.types.FUNCTION?!0:!1},r.jsonPathValue=function(e){function t(e,t){return e[t]}return string.split(sep||".").reduce(t,e)};var n={controller:function(e){this.tabs=e.tabs,this.changeTab=e.changeTab},view:function(e,t,r){return m(".tabbed",m(".tabs",[n.tabs({tabs:e.tabs,selectedItem:t.selectedItem,onchange:e.changeTab})]),n.choose(t.selectedItem,e.tabs,r))}};n.tabs=function(e){return m("ul",e.tabs.map(function(t){return m("li",[n.tab(e,t.name)])}))},n.tab=function(e,t){return m("a",{"class":e.selectedItem==t?"selected":"",onclick:e.onchange.bind(this,t)},t)},n.choose=function(e,t,n){var o;t.forEach(function(t,r){return t.name==e&&(void 0===n.key&&(n.key=r),o=t.content)});var a=r.isFunction(o)?o():o;return m.module(a,n)},t.exports=n},{mithril:"/Users/mglazer/Documents/code/praetor.js/node_modules/mithril/mithril.js"}],"/Users/mglazer/Documents/code/praetor.js/src/scripts/modules/app-modules.js":[function(e,t){m=e("mithril"),p=e("praetor"),passFail=e("../components/pass-fail"),tabbed=e("../components/tabs");
var r=r||{};r.forms={},r.data={},r.data.init=function(){var e=["stores","queries","procs"],t={};e.forEach(function(e){if(t[e]=localStorage[e]?JSON.parse(localStorage[e]):{},"stores"==e)for(k in t[e])t[e][k]=JSON.parse(t[e][k])}),p.setState(t),console.log("state set")}(),r.data.model=function(e){return{saveList:function(t){localStorage[e]=JSON.stringify(t)},getList:function(){return JSON.parse(localStorage[e]||"{}")}}},r.store=function(){var e={data:{selectedItem:"create",tabs:[{name:"create",content:r.store.form},{name:"list",content:r.store.list}]},controller:function(){this.data=e.data,this.actions=r.data.model("stores"),this.list=this.actions.getList(),p({stores:this.list}),this.changeTab=function(e){this.data.selectedItem=e}.bind(this)},view:function(e){var t={tabs:e.data.tabs,selectedItem:e.data.selectedItem,changeTab:e.changeTab};return m("div",{},m.module(tabbed,t,{list:e.list,actions:e.actions}))}};return e},r.store.form=function(){var e={};return e.controller=function(e){this.model={name:m.prop(""),store:m.prop("")},this.actions=e.actions,this.list=e.list,this.pass=m.prop(""),this.fail=m.prop(""),this.save=function(){this.model.name()&&this.model.store()?(this.list[this.model.name()]=this.model.store(),this.actions.saveList(this.list),p.setDataStore(this.model.name(),JSON.parse(this.model.store()))):this.fail(!0)}.bind(this)},e.view=function(e){return m(".form",[m.module(passFail(),{pass:e.pass,fail:e.fail,message:{pass:"yay!",fail:"boo!"}}),"Add store",[m('input[placeholder="store name"]',{onchange:m.withAttr("value",e.model.name),value:e.model.name()}),m('textarea[placeholder="JSON data"]',{onchange:m.withAttr("value",e.model.store),value:e.model.store()}),m("button",{onclick:e.save},"Add")]])},e},r.store.list=function(){var e={};return e.controller=function(){this.stores=p.getState().stores,this.title="Stores",this.showJson=!1,this.showHide=function(e){this.showJson=this.showJson==e?0:e}.bind(this)},e.view=function(e,t){return m("ul.store-list",{},m("h3",e.title),Object.keys(t.list).map(function(r){var n=t.list[r];return m("li",{title:n,onclick:e.showHide.bind(this,r)},r,e.showJson==r?m("textarea.json",n):"")}))},e},r.forms.query=function(){var e={};return e.controller=function(){this.model={name:m.prop(""),query:m.prop(""),store:m.prop("")},this.list=e.model.getList(),this.save=function(){this.list[this.model.name()]={query:this.model.query(),store:this.model.store()},e.model.saveList(this.list),p.setJsonQuery(this.model.name(),this.model.query(),this.model.store())}.bind(this)},e.model={saveList:function(e){localStorage.queries=JSON.stringify(e)},getList:function(){return JSON.parse(localStorage.queries||"{}")}},e.view=function(e){return m(".form",["Add query",[m('input[placeholder="query name"]',{onchange:m.withAttr("value",e.model.name),value:e.model.name()}),m('textarea[placeholder="JSONPath Query"]',{onchange:m.withAttr("value",e.model.query),value:e.model.query()}),m('input[placeholder="JSON store name"]',{onchange:m.withAttr("value",e.model.store),value:e.model.store()}),m("button",{onclick:e.save},"Add")]])},e},r.forms.proc=function(){var e={};return e.controller=function(){this.model={name:m.prop(""),query:m.prop(""),code:m.prop("")},this.list=e.model.getList(),this.save=function(){this.list[this.model.name()]={query:this.model.query(),store:this.model.code()},e.model.saveList(this.list),p.setStoredProc(this.model.name(),this.model.query().split(","),this.model.code())}.bind(this)},e.model={saveList:function(e){localStorage.procs=JSON.stringify(e)},getList:function(){return JSON.parse(localStorage.procs||"{}")}},e.view=function(e){return m(".form",["Add proc",[m('input[placeholder="Proc Name"]',{onchange:m.withAttr("value",e.model.name),value:e.model.name()}),m('input[placeholder="JSON Query Names (comma separated)"]',{onchange:m.withAttr("value",e.model.query),value:e.model.query()}),m('textarea[placeholder="JavaScript Code: this.results & this.params"]',{onchange:m.withAttr("value",e.model.code),value:e.model.code()}),m("button",{onclick:e.save},"Add")]])},e},r.forms.state=function(){return[m(".form",["Add State"])]},t.exports=r},{"../components/pass-fail":"/Users/mglazer/Documents/code/praetor.js/src/scripts/components/pass-fail.js","../components/tabs":"/Users/mglazer/Documents/code/praetor.js/src/scripts/components/tabs.js",mithril:"/Users/mglazer/Documents/code/praetor.js/node_modules/mithril/mithril.js",praetor:"/Users/mglazer/Documents/code/praetor.js/node_modules/praetor/praetor.js"}],"/Users/mglazer/Documents/code/praetor.js/src/scripts/modules/demo.js":[function(e,t){m=e("mithril"),tabbed=e("../components/tabs");var r={};r.booksString='{"books":[{"title":"kids", "author":"adams"},{"title":"action", "author":"johns"}]}',r.books=JSON.parse(r.booksString),r.demo=function(){var e={data:{selectedItem:"create",tabs:[{name:"create",content:r.demo.form},{name:"results",content:r.demo.results}]},controller:function(){this.data=e.data,this.list=m.prop([]),this.code=m.prop(""),this.changeTab=function(e){this.data.selectedItem=e}.bind(this)},view:function(e){var t={tabs:e.data.tabs,selectedItem:e.data.selectedItem,changeTab:e.changeTab};return m("div",{},m.module(tabbed,t,{list:e.list,code:e.code,actions:e.actions,changeTab:e.changeTab}))}};return e},r.demo.form=function(){var e={};return e.controller=function(e){this.model={store:m.prop(""),queries:m.prop(""),code:m.prop("")},this.results=m.prop(""),this.pass=m.prop(""),this.fail=m.prop(""),this.prefill=function(){this.model.store(r.booksString),this.model.queries("$..title"),this.model.code("this.results[0].reverse()")}.bind(this),this.save=function(){this.model.store()&&this.model.queries()&&this.model.code()?(this.results(p.proc(JSON.parse(this.model.store()),this.model.queries().split(","),this.model.code())),this.pass(!0),e.code("p.proc("+this.model.store()+",'"+this.model.queries().split(",")+"', '"+this.model.code()+"')"),e.list(this.results),e.changeTab("results")):this.fail(!0)}.bind(this)},e.view=function(e){return m(".form",[m.module(passFail(),{pass:e.pass,fail:e.fail,message:{pass:"yay!",fail:"boo!"}}),"Run p.proc(store,queries,code)",[m("button.warning",{onclick:e.prefill},"pre-fill sample"),m('textarea[placeholder="JSON data"]',{onchange:m.withAttr("value",e.model.store),value:e.model.store()}),m('input[placeholder="JSONPath queries (comma separated)"]',{onchange:m.withAttr("value",e.model.queries),value:e.model.queries()}),m('textarea[placeholder="JS Code Procedure block (this.results array)"]',{onchange:m.withAttr("value",e.model.code),value:e.model.code()}),m("button",{onclick:e.save},"Run")]])},e},r.demo.results=function(){var e={};return e.controller=function(){},e.view=function(e,t){return m(".results",[m("textarea",JSON.stringify(t.list())),m("textarea",t.code())])},e},t.exports=r},{"../components/tabs":"/Users/mglazer/Documents/code/praetor.js/src/scripts/components/tabs.js",mithril:"/Users/mglazer/Documents/code/praetor.js/node_modules/mithril/mithril.js"}]},{},["./src/scripts/app.js"]);