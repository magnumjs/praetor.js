!function e(t,r,n){function o(s,i){if(!r[s]){if(!t[s]){var l="function"==typeof require&&require;if(!i&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return o(r?r:e)},u,u.exports,e,t,r,n)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({"./src/scripts/app.js":[function(e){function t(e){var t=[{text:"Simple Demo",type:demo.demo},{text:"Create a stateful map of stores",type:app.store}];return[m("ol",t.map(function(t,r){return m("li",{key:r},m("a.action",{onclick:function(t){e.type=t,e.modal.visible(!0)}.bind(this,t.type)},t.text))}))]}m=e("mithril"),modal=e("./comps/modal"),app=e("./comps/app-modules"),demo=e("./comps/demo"),app.controller=function(){this.modal=new modal},app.view=function(e){return m(".container",[m("h2","Praetor Editor Mithril!"),m("h3","JSON Path Stored Procedures"),t(e),e.modal.view(function(){return m("p.content",e.type())}),m('a[href="https://github.com/magnumjs/praetor.js"]',"PraetorJS gitHub")])},m.module(document.body,app)},{"./comps/app-modules":"/Users/mglazer/Documents/code/praetor.js/src/scripts/comps/app-modules.js","./comps/demo":"/Users/mglazer/Documents/code/praetor.js/src/scripts/comps/demo.js","./comps/modal":"/Users/mglazer/Documents/code/praetor.js/src/scripts/comps/modal.js",mithril:"/Users/mglazer/Documents/code/praetor.js/node_modules/mithril/mithril.js"}],"/Users/mglazer/Documents/code/praetor.js/node_modules/browserify/node_modules/vm-browserify/index.js":[function(require,module,exports){function Context(){}var indexOf=require("indexof"),Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(e){return this instanceof Script?(this.code=e,void 0):new Script(e)};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,n=r.eval,o=r.execScript;!n&&o&&(o.call(r,"null"),n=r.eval),forEach(Object_keys(e),function(t){r[t]=e[t]}),forEach(globals,function(t){e[t]&&(r[t]=e[t])});var a=Object_keys(r),s=n.call(r,this.code);return forEach(Object_keys(r),function(t){(t in e||-1===indexOf(a,t))&&(e[t]=r[t])}),forEach(globals,function(t){t in e||defineProp(e,t,r[t])}),document.body.removeChild(t),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),r=this.runInContext(t);return forEach(Object_keys(t),function(r){e[r]=t[r]}),r},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))}}),exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(r){t[r]=e[r]}),t}},{indexof:"/Users/mglazer/Documents/code/praetor.js/node_modules/browserify/node_modules/vm-browserify/node_modules/indexof/index.js"}],"/Users/mglazer/Documents/code/praetor.js/node_modules/browserify/node_modules/vm-browserify/node_modules/indexof/index.js":[function(e,t){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],"/Users/mglazer/Documents/code/praetor.js/node_modules/mithril/mithril.js":[function(e,t){var r=function n(e,t){function r(e){J=e.document,_=e.location,A=e.cancelAnimationFrame||e.clearTimeout,T=e.requestAnimationFrame||e.setTimeout}function o(){var e,t=[].slice.call(arguments),r=!(null==t[1]||I.call(t[1])!==P||"tag"in t[1]||"view"in t[1]||"subtree"in t[1]),n=r?t[1]:{},o="class"in n?"class":"className",a={tag:"div",attrs:{}},s=[];if(I.call(t[0])!=D)throw new Error("selector in m(selector, attrs, children) should be a string");for(;e=z.exec(t[0]);)if(""===e[1]&&e[2])a.tag=e[2];else if("#"===e[1])a.attrs.id=e[2];else if("."===e[1])s.push(e[2]);else if("["===e[3][0]){var i=R.exec(e[3]);a.attrs[i[1]]=i[3]||(i[2]?"":!0)}s.length>0&&(a.attrs[o]=s.join(" "));var l=r?t.slice(2):t.slice(1);a.children=1===l.length&&I.call(l[0])===q?l[0]:l;for(var c in n)c===o?""!==n[c]&&(a.attrs[c]=(a.attrs[c]||"")+" "+n[c]):a.attrs[c]=n[c];return a}function a(e,r,n,c,d,f,m,p,h,g,v){try{(null==d||null==d.toString())&&(d="")}catch(y){d=""}if("retain"===d.subtree)return f;var b=I.call(f),w=I.call(d);if(null==f||b!==w){if(null!=f)if(n&&n.nodes){var x=p-c,S=x+(w===q?d:f.nodes).length;l(n.nodes.slice(x,S),n.slice(x,S))}else f.nodes&&l(f.nodes,f);f=new d.constructor,f.tag&&(f={}),f.nodes=[]}if(w===q){for(var j=0,O=d.length;O>j;j++)I.call(d[j])===q&&(d=d.concat.apply([],d),j--,O=d.length);for(var N=[],k=f.length===d.length,E=0,C=1,_=2,T=3,A={},z=[],R=!1,j=0;j<f.length;j++)f[j]&&f[j].attrs&&null!=f[j].attrs.key&&(R=!0,A[f[j].attrs.key]={action:C,index:j});if(R){d.indexOf(null)>-1&&(d=d.filter(function(e){return null!=e}));var $=!1;if(d.length!=f.length)$=!0;else for(var M,B,j=0;M=f[j],B=d[j];j++)if(M.attrs&&B.attrs&&M.attrs.key!=B.attrs.key){$=!0;break}if($){for(var j=0,O=d.length;O>j;j++)if(d[j]&&d[j].attrs)if(null!=d[j].attrs.key){var F=d[j].attrs.key;A[F]=A[F]?{action:T,index:j,from:A[F].index,element:f.nodes[A[F].index]||J.createElement("div")}:{action:_,index:j}}else z.push({index:j,element:e.childNodes[j]||J.createElement("div")});var H=[];for(var Q in A)H.push(A[Q]);for(var K,G=H.sort(s),V=new Array(f.length),j=0;K=G[j];j++){if(K.action===C&&(l(f[K.index].nodes,f[K.index]),V.splice(K.index,1)),K.action===_){var Y=J.createElement("div");Y.key=d[K.index].attrs.key,e.insertBefore(Y,e.childNodes[K.index]||null),V.splice(K.index,0,{attrs:{key:d[K.index].attrs.key},nodes:[Y]})}K.action===T&&(e.childNodes[K.index]!==K.element&&null!==K.element&&e.insertBefore(K.element,e.childNodes[K.index]||null),V[K.index]=f[K.from])}for(var j=0,O=z.length;O>j;j++){var K=z[j];e.insertBefore(K.element,e.childNodes[K.index]||null),V[K.index]=f[K.index]}f=V,f.nodes=new Array(e.childNodes.length);for(var W,j=0;W=e.childNodes[j];j++)f.nodes[j]=W}}for(var j=0,Z=0,O=d.length;O>j;j++){var et=a(e,r,f,p,d[j],f[Z],m,p+E||E,h,g,v);et!==t&&(et.nodes.intact||(k=!1),E+=et.$trusted?(et.match(/<[^\/]|\>\s*[^<]|&/g)||[]).length:I.call(et)===q?et.length:1,f[Z++]=et)}if(!k){for(var j=0,O=d.length;O>j;j++)null!=f[j]&&N.push.apply(N,f[j].nodes);for(var tt,j=0;tt=f.nodes[j];j++)null!=tt.parentNode&&N.indexOf(tt)<0&&l([tt],[f[j]]);d.length<f.length&&(f.length=d.length),f.nodes=N}}else if(null!=d&&w===P){if(d.view){var nt,ot=d,at=f.controller||new(ot.controller||function(){});if(d=0==rt?ot.view(at):{tag:"placeholder"},at.onunload&&X.push({controller:at,handler:at.onunload}),!d.tag)throw new Error("Component template must return a virtual element, not an array, string, etc.")}d.attrs||(d.attrs={}),f.attrs||(f.attrs={});var st=Object.keys(d.attrs),it=st.length>("key"in d.attrs?1:0);if((d.tag!=f.tag||st.join()!=Object.keys(f.attrs).join()||d.attrs.id!=f.attrs.id||d.attrs.key!=f.attrs.key||"all"==o.redraw.strategy()&&f.configContext&&f.configContext.retain!==!0||"diff"==o.redraw.strategy()&&f.configContext&&f.configContext.retain===!1)&&(f.nodes.length&&l(f.nodes),f.configContext&&typeof f.configContext.onunload===U&&f.configContext.onunload(),f.controller&&typeof f.controller.onunload===U&&f.controller.onunload({preventDefault:function(){}})),I.call(d.tag)!=D)return;var tt,lt=0===f.nodes.length;if(d.attrs.xmlns?g=d.attrs.xmlns:"svg"===d.tag?g="http://www.w3.org/2000/svg":"math"===d.tag&&(g="http://www.w3.org/1998/Math/MathML"),lt){if(tt=d.attrs.is?g===t?J.createElement(d.tag,d.attrs.is):J.createElementNS(g,d.tag,d.attrs.is):g===t?J.createElement(d.tag):J.createElementNS(g,d.tag),f={tag:d.tag,attrs:it?i(tt,d.tag,d.attrs,{},g):d.attrs,children:null!=d.children&&d.children.length>0?a(tt,d.tag,t,t,d.children,f.children,!0,0,d.attrs.contenteditable?tt:h,g,v):d.children,nodes:[tt]},at&&(f.controller=at,at.onunload&&at.onunload.$old&&(at.onunload=at.onunload.$old),rt&&at.onunload)){var nt=at.onunload;at.onunload=function(){},at.onunload.$old=nt}f.children&&!f.children.nodes&&(f.children.nodes=[]),"select"===d.tag&&d.attrs.value&&i(tt,d.tag,{value:d.attrs.value},{},g),e.insertBefore(tt,e.childNodes[p]||null)}else tt=f.nodes[0],it&&i(tt,d.tag,d.attrs,f.attrs,g),f.children=a(tt,d.tag,t,t,d.children,f.children,!1,0,d.attrs.contenteditable?tt:h,g,v),f.nodes.intact=!0,m===!0&&null!=tt&&e.insertBefore(tt,e.childNodes[p]||null);if(typeof d.attrs.config===U){var ct=f.configContext=f.configContext||{retain:"diff"==o.redraw.strategy()},ut=function(e,t){return function(){return e.attrs.config.apply(e,t)}};v.push(ut(d,[tt,!lt,ct,f]))}}else if(typeof w!=U){var N;0===f.nodes.length?(d.$trusted?N=u(e,p,d):(N=[J.createTextNode(d)],e.nodeName.match(L)||e.insertBefore(N[0],e.childNodes[p]||null)),f="string number boolean".indexOf(typeof d)>-1?new d.constructor(d):d,f.nodes=N):f.valueOf()!==d.valueOf()||m===!0?(N=f.nodes,h&&h===J.activeElement||(d.$trusted?(l(N,f),N=u(e,p,d)):"textarea"===r?e.value=d:h?h.innerHTML=d:((1===N[0].nodeType||N.length>1)&&(l(f.nodes,f),N=[J.createTextNode(d)]),e.insertBefore(N[0],e.childNodes[p]||null),N[0].nodeValue=d)),f=new d.constructor(d),f.nodes=N):f.nodes.intact=!0}return f}function s(e,t){return e.action-t.action||e.index-t.index}function i(e,t,r,n,o){for(var a in r){var s=r[a],i=n[a];if(a in n&&i===s)"value"===a&&"input"===t&&e.value!=s&&(e.value=s);else{n[a]=s;try{if("config"===a||"key"==a)continue;if(typeof s===U&&0===a.indexOf("on"))e[a]=d(s,e);else if("style"===a&&null!=s&&I.call(s)===P){for(var l in s)(null==i||i[l]!==s[l])&&(e.style[l]=s[l]);for(var l in i)l in s||(e.style[l]="")}else null!=o?"href"===a?e.setAttributeNS("http://www.w3.org/1999/xlink","href",s):"className"===a?e.setAttribute("class",s):e.setAttribute(a,s):a in e&&"list"!==a&&"style"!==a&&"form"!==a&&"type"!==a?("input"!==t||e[a]!==s)&&(e[a]=s):e.setAttribute(a,s)}catch(c){if(c.message.indexOf("Invalid argument")<0)throw c}}}return n}function l(e,t){for(var r=e.length-1;r>-1;r--)if(e[r]&&e[r].parentNode){try{e[r].parentNode.removeChild(e[r])}catch(n){}t=[].concat(t),t[r]&&c(t[r])}0!=e.length&&(e.length=0)}function c(e){if(e.configContext&&typeof e.configContext.onunload===U&&(e.configContext.onunload(),e.configContext.onunload=null),e.controller&&typeof e.controller.onunload===U&&e.controller.onunload({preventDefault:function(){}}),e.children)if(I.call(e.children)===q)for(var t,r=0;t=e.children[r];r++)c(t);else e.children.tag&&c(e.children)}function u(e,t,r){var n=e.childNodes[t];if(n){var o=1!=n.nodeType,a=J.createElement("span");o?(e.insertBefore(a,n||null),a.insertAdjacentHTML("beforebegin",r),e.removeChild(a)):n.insertAdjacentHTML("beforebegin",r)}else e.insertAdjacentHTML("beforeend",r);for(var s=[];e.childNodes[t]!==n;)s.push(e.childNodes[t]),t++;return s}function d(e,t){return function(r){r=r||event,o.redraw.strategy("diff"),o.startComputation();try{return e.call(t,r)}finally{nt()}}}function f(e){var t=B.indexOf(e);return 0>t?B.push(e)-1:t}function m(e){var t=function(){return arguments.length&&(e=arguments[0]),e};return t.toJSON=function(){return e},t}function p(e,t){var r=function(){return(e.controller||function(){}).apply(this,t)||this},n=function(r){arguments.length>1&&(t=t.concat([].slice.call(arguments,1)));var n=e.view.apply(e,t?[r].concat(t):[r]);return t[0]&&null!=t[0].key&&(n.attrs.key=t[0].key),n},o={controller:r,view:n};return t[0]&&null!=t[0].key&&(o.attrs={key:t[0].key}),o}function h(){for(var e,t=0;e=Q[t];t++)if(G[t]){var r=K[t].controller&&K[t].controller.$$args?[G[t]].concat(K[t].controller.$$args):[G[t]];o.render(e,K[t].view?K[t].view(G[t],r):tt())}W&&(W(),W=null),V=null,Y=new Date,o.redraw.strategy("diff")}function g(e){return e.slice(st[o.route.mode].length)}function v(e,t,r){ot={};var n=r.indexOf("?");-1!==n&&(ot=x(r.substr(n+1,r.length)),r=r.substr(0,n));var a=Object.keys(t),s=a.indexOf(r);if(-1!==s)return o.module(e,t[a[s]]),!0;for(var i in t){if(i===r)return o.module(e,t[i]),!0;var l=new RegExp("^"+i.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(l.test(r))return r.replace(l,function(){for(var r=i.match(/:[^\/]+/g)||[],n=[].slice.call(arguments,1,-2),a=0,s=r.length;s>a;a++)ot[r[a].replace(/:|\./g,"")]=decodeURIComponent(n[a]);o.module(e,t[i])}),!0}}function y(e){if(e=e||event,!e.ctrlKey&&!e.metaKey&&2!==e.which){e.preventDefault?e.preventDefault():e.returnValue=!1;for(var t=e.currentTarget||e.srcElement,r="pathname"===o.route.mode&&t.search?x(t.search.slice(1)):{};t&&"A"!=t.nodeName.toUpperCase();)t=t.parentNode;o.route(t[o.route.mode].slice(st[o.route.mode].length),r)}}function b(){"hash"!=o.route.mode&&_.hash?_.hash=_.hash:e.scrollTo(0,0)}function w(e,t){var r=[];for(var n in e){var o=t?t+"["+n+"]":n,a=e[n],s=I.call(a),i=null!=a&&s===P?w(a,o):s===q?a.map(function(e){return encodeURIComponent(o+"[]")+"="+encodeURIComponent(e)}).join("&"):encodeURIComponent(o)+"="+encodeURIComponent(a);r.push(i)}return r.join("&")}function x(e){for(var t=e.split("&"),r={},n=0,o=t.length;o>n;n++){var a=t[n].split("=");r[decodeURIComponent(a[0])]=a[1]?decodeURIComponent(a[1]):""}return r}function S(e){var r=f(e);l(e.childNodes,F[r]),F[r]=t}function j(e){var t=o.prop();return e.then(t),t.then=function(r,n){return e=e.then(r,n).then(t),t},t}function O(e,t){function r(e){d=e||c,m.map(function(e){d===l&&e.resolve(f)||e.reject(f)})}function n(e,t,r,n){if((null!=f&&I.call(f)===P||typeof f===U)&&typeof e===U)try{var a=0;e.call(f,function(e){a++||(f=e,t())},function(e){a++||(f=e,r())})}catch(s){o.deferred.onerror(s),f=s,r()}else n()}function a(){var c;try{c=f&&f.then}catch(m){return o.deferred.onerror(m),f=m,d=i,a()}n(c,function(){d=s,a()},function(){d=i,a()},function(){try{d===s&&typeof e===U?f=e(f):d===i&&"function"==typeof t&&(f=t(f),d=s)}catch(a){return o.deferred.onerror(a),f=a,r()}f===u?(f=TypeError(),r()):n(c,function(){r(l)},r,function(){r(d===s&&l)})})}var s=1,i=2,l=3,c=4,u=this,d=0,f=0,m=[];u.promise={},u.resolve=function(e){return d||(f=e,d=s,a()),this},u.reject=function(e){return d||(f=e,d=i,a()),this},u.promise.then=function(e,t){var r=new O(e,t);return d===l?r.resolve(f):d===c?r.reject(f):m.push(r),r.promise}}function N(e){return e}function k(r){if(!r.dataType||"jsonp"!==r.dataType.toLowerCase()){var n=new e.XMLHttpRequest;if(n.open(r.method,r.url,!0,r.user,r.password),n.onreadystatechange=function(){4===n.readyState&&(n.status>=200&&n.status<300?r.onload({type:"load",target:n}):r.onerror({type:"error",target:n}))},r.serialize===JSON.stringify&&r.data&&"GET"!==r.method&&n.setRequestHeader("Content-Type","application/json; charset=utf-8"),r.deserialize===JSON.parse&&n.setRequestHeader("Accept","application/json, text/*"),typeof r.config===U){var o=r.config(n,r);null!=o&&(n=o)}var a="GET"!==r.method&&r.data?r.data:"";if(a&&I.call(a)!=D&&a.constructor!=e.FormData)throw"Request data should be either be a string or FormData. Check the `serialize` option in `m.request`";return n.send(a),n}var s="mithril_callback_"+(new Date).getTime()+"_"+Math.round(1e16*Math.random()).toString(36),i=J.createElement("script");e[s]=function(n){i.parentNode.removeChild(i),r.onload({type:"load",target:{responseText:n}}),e[s]=t},i.onerror=function(){return i.parentNode.removeChild(i),r.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),e[s]=t,!1},i.onload=function(){return!1},i.src=r.url+(r.url.indexOf("?")>0?"&":"?")+(r.callbackKey?r.callbackKey:"callback")+"="+s+"&"+w(r.data||{}),J.body.appendChild(i)}function E(e,t,r){if("GET"===e.method&&"jsonp"!=e.dataType){var n=e.url.indexOf("?")<0?"?":"&",o=w(t);e.url=e.url+(o?n+o:"")}else e.data=r(t);return e}function C(e,t){var r=e.match(/:[a-z]\w+/gi);if(r&&t)for(var n=0;n<r.length;n++){var o=r[n].slice(1);e=e.replace(r[n],t[o]),delete t[o]}return e}var J,_,T,A,P="[object Object]",q="[object Array]",D="[object String]",U="function",I={}.toString,z=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,R=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,L=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/;r(e);var $,M={appendChild:function(e){$===t&&($=J.createElement("html")),J.documentElement&&J.documentElement!==e?J.replaceChild(e,J.documentElement):J.appendChild(e),this.childNodes=J.childNodes},insertBefore:function(e){this.appendChild(e)},childNodes:[]},B=[],F={};o.render=function(e,r,n){var o=[];if(!e)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var s=f(e),i=e===J,c=i||e===J.documentElement?M:e;i&&"html"!=r.tag&&(r={tag:"html",attrs:{},children:r}),F[s]===t&&l(c.childNodes),n===!0&&S(e),F[s]=a(c,null,t,t,r,F[s],!1,0,null,t,o);for(var u=0,d=o.length;d>u;u++)o[u]()},o.trust=function(e){return e=new String(e),e.$trusted=!0,e},o.prop=function(e){return(null!=e&&I.call(e)===P||typeof e===U)&&typeof e.then===U?j(e):m(e)};var H,Q=[],K=[],G=[],V=null,Y=0,W=null,X=[],Z=16;o.module=function(e,t){if(!e)throw new Error("Please ensure the DOM element exists before rendering a template into it.");if(e.view)return p(e,[].slice.call(arguments,1));var r=Q.indexOf(e);0>r&&(r=Q.length);for(var n,a=!1,s={preventDefault:function(){a=!0}},i=0;n=X[i];i++)n.handler(s),n.controller.onunload=null;if(a)for(var n,i=0;n=X[i];i++)n.controller.onunload=n.handler;else X=[];if(G[r]&&typeof G[r].onunload===U&&G[r].onunload(s),!a){o.redraw.strategy("all"),o.startComputation(),Q[r]=e,arguments.length>2&&(t=p(t,[].slice.call(arguments,2)));var l=H=t=t||{},c=t.controller||function(){},u=new c;return l===H&&(G[r]=u,K[r]=t),nt(),G[r]}};var et=!1;o.redraw=function(t){et||(et=!0,V&&t!==!0?(new Date-Y>Z||T===e.requestAnimationFrame)&&(V>0&&A(V),V=T(h,Z)):(h(),V=T(function(){V=null},Z)),et=!1)},o.redraw.strategy=o.prop();var tt=function(){return""},rt=0;o.startComputation=function(){rt++},o.endComputation=function(){rt=Math.max(rt-1,0),0===rt&&o.redraw()};var nt=function(){"none"==o.redraw.strategy()?(rt--,o.redraw.strategy("diff")):o.endComputation()};o.withAttr=function(e,t){return function(r){r=r||event;var n=r.currentTarget||this;t(e in n?n[e]:n.getAttribute(e))}};var ot,at,st={pathname:"",hash:"#",search:"?"},it=function(){};return o.route=function(){if(0===arguments.length)return at;if(3===arguments.length&&I.call(arguments[1])===D){var t=arguments[0],r=arguments[1],n=arguments[2];it=function(e){var a=at=g(e);v(t,n,a)||o.route(r,!0)};var a="hash"===o.route.mode?"onhashchange":"onpopstate";e[a]=function(){var e=_[o.route.mode];"pathname"===o.route.mode&&(e+=_.search),at!=g(e)&&it(e)},W=b,e[a]()}else if(arguments[0].addEventListener||arguments[0].attachEvent){{var s=arguments[0];arguments[1],arguments[2]}s.href=("pathname"!==o.route.mode?_.pathname:"")+st[o.route.mode]+this.attrs.href,s.addEventListener?(s.removeEventListener("click",y),s.addEventListener("click",y)):(s.detachEvent("onclick",y),s.attachEvent("onclick",y))}else if(I.call(arguments[0])===D){var i=at;at=arguments[0];var l=arguments[1]||{},c=at.indexOf("?"),u=c>-1?x(at.slice(c+1)):{};for(var d in l)u[d]=l[d];var f=w(u),m=c>-1?at.slice(0,c):at;f&&(at=m+(-1===m.indexOf("?")?"?":"&")+f);var p=(3===arguments.length?arguments[2]:arguments[1])===!0||i===arguments[0];e.history.pushState?(W=function(){e.history[p?"replaceState":"pushState"](null,J.title,st[o.route.mode]+at),b()},it(st[o.route.mode]+at)):(_[o.route.mode]=at,it(st[o.route.mode]+at))}},o.route.param=function(e){if(!ot)throw new Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return ot[e]},o.route.mode="search",o.deferred=function(){var e=new O;return e.promise=j(e.promise),e},o.deferred.onerror=function(e){if("[object Error]"===I.call(e)&&!e.constructor.toString().match(/ Error/))throw e},o.sync=function(e){function t(e,t){return function(o){return s[e]=o,t||(r="reject"),0===--a&&(n.promise(s),n[r](s)),o}}var r="resolve",n=o.deferred(),a=e.length,s=new Array(a);if(e.length>0)for(var i=0;i<e.length;i++)e[i].then(t(i,!0),t(i,!1));else n.resolve([]);return n.promise},o.request=function(e){e.background!==!0&&o.startComputation();var t=o.deferred(),r=e.dataType&&"jsonp"===e.dataType.toLowerCase(),n=e.serialize=r?N:e.serialize||JSON.stringify,a=e.deserialize=r?N:e.deserialize||JSON.parse,s=e.extract||function(e){return 0===e.responseText.length&&a===JSON.parse?null:e.responseText};return e.url=C(e.url,e.data),e=E(e,e.data,n),e.onload=e.onerror=function(r){try{r=r||event;var n=("load"===r.type?e.unwrapSuccess:e.unwrapError)||N,i=n(a(s(r.target,e)),r.target);if("load"===r.type)if(I.call(i)===q&&e.type)for(var l=0;l<i.length;l++)i[l]=new e.type(i[l]);else e.type&&(i=new e.type(i));t["load"===r.type?"resolve":"reject"](i)}catch(r){o.deferred.onerror(r),t.reject(r)}e.background!==!0&&o.endComputation()},k(e),t.promise(e.initialValue),t.promise},o.deps=function(t){return r(e=t||e),e},o.deps.factory=n,o}("undefined"!=typeof window?window:{});"undefined"!=typeof t&&null!==t&&t.exports?t.exports=r:"function"==typeof define&&define.amd&&define(function(){return r})},{}],"/Users/mglazer/Documents/code/praetor.js/node_modules/praetor/node_modules/JSONPath/lib/jsonpath.js":[function(require,module,exports){!function(require){"use strict";function push(e,t){return e=e.slice(),e.push(t),e}function unshift(e,t){return t=t.slice(),t.unshift(e),t}function JSONPath(e,t,r){if(!(this instanceof JSONPath))try{return new JSONPath(e,t,r)}catch(n){if(!n.avoidNew)throw n;return n.value}e=e||{};var o=e.hasOwnProperty("json")&&e.hasOwnProperty("path");if(this.resultType=e.resultType&&e.resultType.toLowerCase()||"value",this.flatten=e.flatten||!1,this.wrap=e.hasOwnProperty("wrap")?e.wrap:!0,this.sandbox=e.sandbox||{},e.autostart!==!1){var a=this.evaluate(o?e.json:t,o?e.path:r);if(!a||"object"!=typeof reg)throw{avoidNew:!0,value:a,message:"JSONPath should not be called with 'new'"}}}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var isNode="undefined"!=typeof module&&!!module.exports,vm=isNode?require("vm"):{runInNewContext:function(expr,context){return eval(Object.keys(context).reduce(function(e,t){return"var "+t+"="+JSON.stringify(context[t])+";"+e},expr))}},cache={};JSONPath.prototype.evaluate=function(e,t){var r=this;if(this._obj=e,t&&e&&("value"===this.resultType||"path"===this.resultType)){var n=this._normalize(t);"$"===n[0]&&n.length>1&&n.shift();var o=this._trace(n,e,["$"]);return o=o.filter(function(e){return e&&!e.isParentSelector}),o.length?1!==o.length||this.wrap||Array.isArray(o[0].value)?o.reduce(function(e,t){var n=t[r.resultType];return"path"===r.resultType&&(n=r._asPath(n)),r.flatten&&Array.isArray(n)?e=e.concat(n):e.push(n),e},[]):o[0][this.resultType]||!1:this.wrap?[]:!1}},JSONPath.prototype._normalize=function(e){if(cache[e])return cache[e];var t=[],r=e.replace(/[\['](\??\(.*?\))[\]']/g,function(e,r){return"[#"+(t.push(r)-1)+"]"}).replace(/'?\.'?|\['?/g,";").replace(/(?:;)?(\^+)(?:;)?/g,function(e,t){return";"+t.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,""),n=r.split(";").map(function(e){var r=e.match(/#([0-9]+)/);return r&&r[1]?t[r[1]]:e});return cache[e]=n,cache[e]},JSONPath.prototype._asPath=function(e){var t,r,n=e,o="$";for(t=1,r=n.length;r>t;t++)o+=/^[0-9*]+$/.test(n[t])?"["+n[t]+"]":"['"+n[t]+"']";return o},JSONPath.prototype._trace=function(e,t,r){function n(e){i=i.concat(e)}var o=this;if(!e.length)return[{path:r,value:t}];var a=e[0],s=e.slice(1);if("^"===a)return r.length?[{path:r.slice(0,-1),expr:s,isParentSelector:!0}]:[];var i=[];if(t&&t.hasOwnProperty(a))n(this._trace(s,t[a],push(r,a)));else if("*"===a)this._walk(a,s,t,r,function(e,t,r,a,s){n(o._trace(unshift(e,r),a,s))});else if(".."===a)n(this._trace(s,t,r)),this._walk(a,s,t,r,function(e,t,r,a,s){"object"==typeof a[e]&&n(o._trace(unshift("..",r),a[e],push(s,e)))});else if("("===a[0])n(this._trace(unshift(this._eval(a,t,r[r.length],r),s),t,r));else if(0===a.indexOf("?("))this._walk(a,s,t,r,function(e,t,a,s,i){o._eval(t.replace(/^\?\((.*?)\)$/,"$1"),s[e],e,r)&&n(o._trace(unshift(e,a),s,i))});else if(a.indexOf(",")>-1){var l,c;for(l=a.split(","),c=0;c<l.length;c++)n(this._trace(unshift(l[c],s),t,r))}else/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(a)&&n(this._slice(a,s,t,r));return i.reduce(function(e,r){return e.concat(r.isParentSelector?o._trace(r.expr,t,r.path):[r])},[])},JSONPath.prototype._walk=function(e,t,r,n,o){var a,s,i;if(Array.isArray(r))for(a=0,s=r.length;s>a;a++)o(a,e,t,r,n);else if("object"==typeof r)for(i in r)r.hasOwnProperty(i)&&o(i,e,t,r,n)},JSONPath.prototype._slice=function(e,t,r,n){if(Array.isArray(r)){var o,a=r.length,s=e.split(":"),i=s[0]&&parseInt(s[0],10)||0,l=s[1]&&parseInt(s[1],10)||a,c=s[2]&&parseInt(s[2],10)||1;i=0>i?Math.max(0,i+a):Math.min(a,i),l=0>l?Math.max(0,l+a):Math.min(a,l);var u=[];for(o=i;l>o;o+=c)u=u.concat(this._trace(unshift(o,t),r,n));return u}},JSONPath.prototype._eval=function(e,t,r,n){if(!this._obj||!t)return!1;e.indexOf("@path")>-1&&(this.sandbox._$_path=this._asPath(n.concat([r])),e=e.replace(/@path/g,"_$_path")),e.indexOf("@")>-1&&(this.sandbox._$_v=t,e=e.replace(/@/g,"_$_v"));try{return vm.runInNewContext(e,this.sandbox)}catch(o){throw console.log(o),new Error("jsonPath: "+o.message+": "+e)}},JSONPath.eval=function(e,t,r){return JSONPath(r,e,t)},"undefined"==typeof module?(window.jsonPath={eval:JSONPath.eval},window.JSONPath=JSONPath):module.exports=JSONPath}("undefined"==typeof require?null:require)},{vm:"/Users/mglazer/Documents/code/praetor.js/node_modules/browserify/node_modules/vm-browserify/index.js"}],"/Users/mglazer/Documents/code/praetor.js/node_modules/praetor/praetor.js":[function(e,t){var r=e("JSONPath"),n=function(e,t){"use strict";function n(e,r){for(var n in r)e[n]=e[n]===t?r[n]:e[n];return e}function o(e,r,n){var o=Function(r.codeBody);for(var a in r.parms)n[a]=n[a]===t?r.parms[a]:n[a];var s={results:e,params:n},i=o.apply(s);return i?i:s.results}function a(e,t,r){a.setOptions(r,t);var o=n(e,JSON.parse(JSON.stringify(l)));a.map(t,o)}var s=function(e,t){for(var r in t)"object"!=typeof e[r]?e[r]=t[r]:"object"==typeof t[r]&&(e[r]=s(e[r],t[r]));return e},i={};i.stores={},i.queries={},i.procs={};var l=function(){return JSON.parse(JSON.stringify(i))}(),c={jsonPathOptions:{}},u={},d={},f="[object Object]",m={}.toString;return a.setOptions=function(e,t){u=e,a.settings(e,t)},a.getOptions=function(){return u},a.settings=function(e){return d=s(c,e)},a.map=function(e,t){return this.state=this.state||{},e&&m.call(e)!==f?(this.state[e]||(this.state[e]=t||JSON.parse(JSON.stringify(l))),this.state[e]):(this.state[a.id]=t||this.state[a.id]||i,this.state[a.id])},a.proc=function(e,t,n,s){var i=t.map(function(t){return r(a.settings().jsonPathOptions,e,t)}),l={parms:s,codeBody:n};return o(i,l,s)},a.setDataStore=function(e,t,r){a.map(r).stores[e]=t},a.getDataStore=function(e,t){return a.map(t).stores[e]},a.setJsonQuery=function(e,t,r,n){a.map(n).queries[e]={query:t,store:r}},a.getJsonQuery=function(e,t){return a.map(t).queries[e]},a.getJsonQueryResult=function(e,t){var n=a.getJsonQuery(e,t),o=a.getDataStore(n.store,t),s=r(a.settings().jsonPathOptions,o,n.query);return s},a.setStoredProc=function(e,t,r,n,o){a.map(o).procs[e]={namedQueries:t,codeBody:r,parms:n}},a.getStoredProc=function(e,t){return a.map(t).procs[e]},a.getStoredProcResult=function(e,t,r){var n=a.getStoredProc(e,r),s=[];return s=n.namedQueries.map(function(e){var t={};return t[e]=a.getJsonQueryResult(e,r),t}),o(s,n,t)},a.setState=function(e,t){a.map(e,t)},a.getState=function(e){return JSON.parse(JSON.stringify(a.map(e)))},a}("undefined"!=typeof window?window:{});"undefined"!=typeof t&&null!==t&&t.exports?t.exports=n:"function"==typeof define&&define.amd&&define(function(){return n})},{JSONPath:"/Users/mglazer/Documents/code/praetor.js/node_modules/praetor/node_modules/JSONPath/lib/jsonpath.js"}],"/Users/mglazer/Documents/code/praetor.js/src/scripts/comps/app-modules.js":[function(e,t){m=e("mithril"),p=e("praetor"),passFail=e("./pass-fail"),tabbed=e("./tabs");var r=r||{};r.forms={},r.data={},r.data.init=function(){var e=["stores","queries","procs"],t={};e.forEach(function(e){if(t[e]=localStorage[e]?JSON.parse(localStorage[e]):{},"stores"==e)for(k in t[e])t[e][k]=JSON.parse(t[e][k])}),p.setState(t),console.log("state set")}(),r.data.model=function(e){return{saveList:function(t){localStorage[e]=JSON.stringify(t)},getList:function(){return JSON.parse(localStorage[e]||"{}")}}},r.store=function(){var e={data:{selectedItem:"create",tabs:[{name:"create",content:r.store.form},{name:"list",content:r.store.list}]},controller:function(){this.data=e.data,this.actions=r.data.model("stores"),this.list=this.actions.getList(),p({stores:this.list}),this.changeTab=function(e){this.data.selectedItem=e}.bind(this)},view:function(e){var t={tabs:e.data.tabs,selectedItem:e.data.selectedItem,changeTab:e.changeTab};return m("div",{},m.module(tabbed,t,{list:e.list,actions:e.actions}))}};return e},r.store.form=function(){var e={};return e.controller=function(e){this.model={name:m.prop(""),store:m.prop("")},this.actions=e.actions,this.list=e.list,this.pass=m.prop(""),this.fail=m.prop(""),this.save=function(){this.model.name()&&this.model.store()?(this.list[this.model.name()]=this.model.store(),this.actions.saveList(this.list),p.setDataStore(this.model.name(),JSON.parse(this.model.store()))):this.fail(!0)}.bind(this)},e.view=function(e){return m(".form",[m.module(passFail(),{pass:e.pass,fail:e.fail,message:{pass:"yay!",fail:"boo!"}}),"Add store",[m('input[placeholder="store name"]',{onchange:m.withAttr("value",e.model.name),value:e.model.name()}),m('textarea[placeholder="JSON data"]',{onchange:m.withAttr("value",e.model.store),value:e.model.store()}),m("button",{onclick:e.save},"Add")]])},e},r.store.list=function(){var e={};return e.controller=function(){this.stores=p.getState().stores,this.title="Stores",this.showJson=!1,this.showHide=function(e){this.showJson=this.showJson==e?0:e}.bind(this)},e.view=function(e,t){return m("ul.store-list",{},m("h3",e.title),Object.keys(t.list).map(function(r){var n=t.list[r];return m("li",{title:n,onclick:e.showHide.bind(this,r)},r,e.showJson==r?m("textarea.json",n):"")}))},e},r.forms.query=function(){var e={};return e.controller=function(){this.model={name:m.prop(""),query:m.prop(""),store:m.prop("")},this.list=e.model.getList(),this.save=function(){this.list[this.model.name()]={query:this.model.query(),store:this.model.store()},e.model.saveList(this.list),p.setJsonQuery(this.model.name(),this.model.query(),this.model.store())}.bind(this)},e.model={saveList:function(e){localStorage.queries=JSON.stringify(e)},getList:function(){return JSON.parse(localStorage.queries||"{}")}},e.view=function(e){return m(".form",["Add query",[m('input[placeholder="query name"]',{onchange:m.withAttr("value",e.model.name),value:e.model.name()}),m('textarea[placeholder="JSONPath Query"]',{onchange:m.withAttr("value",e.model.query),value:e.model.query()}),m('input[placeholder="JSON store name"]',{onchange:m.withAttr("value",e.model.store),value:e.model.store()}),m("button",{onclick:e.save},"Add")]])},e},r.forms.proc=function(){var e={};return e.controller=function(){this.model={name:m.prop(""),query:m.prop(""),code:m.prop("")},this.list=e.model.getList(),this.save=function(){this.list[this.model.name()]={query:this.model.query(),store:this.model.code()},e.model.saveList(this.list),p.setStoredProc(this.model.name(),this.model.query().split(","),this.model.code())
}.bind(this)},e.model={saveList:function(e){localStorage.procs=JSON.stringify(e)},getList:function(){return JSON.parse(localStorage.procs||"{}")}},e.view=function(e){return m(".form",["Add proc",[m('input[placeholder="Proc Name"]',{onchange:m.withAttr("value",e.model.name),value:e.model.name()}),m('input[placeholder="JSON Query Names (comma separated)"]',{onchange:m.withAttr("value",e.model.query),value:e.model.query()}),m('textarea[placeholder="JavaScript Code: this.results & this.params"]',{onchange:m.withAttr("value",e.model.code),value:e.model.code()}),m("button",{onclick:e.save},"Add")]])},e},r.forms.state=function(){return[m(".form",["Add State"])]},t.exports=r},{"./pass-fail":"/Users/mglazer/Documents/code/praetor.js/src/scripts/comps/pass-fail.js","./tabs":"/Users/mglazer/Documents/code/praetor.js/src/scripts/comps/tabs.js",mithril:"/Users/mglazer/Documents/code/praetor.js/node_modules/mithril/mithril.js",praetor:"/Users/mglazer/Documents/code/praetor.js/node_modules/praetor/praetor.js"}],"/Users/mglazer/Documents/code/praetor.js/src/scripts/comps/demo.js":[function(e,t){m=e("mithril"),tabbed=e("./tabs");var r={};r.booksString='{"books":[{"title":"kids", "author":"adams"},{"title":"action", "author":"johns"}]}',r.books=JSON.parse(r.booksString),r.demo=function(){var e={data:{selectedItem:"create",tabs:[{name:"create",content:r.demo.form},{name:"results",content:r.demo.results}]},controller:function(){this.data=e.data,this.list=m.prop([]),this.code=m.prop(""),this.changeTab=function(e){this.data.selectedItem=e}.bind(this)},view:function(e){var t={tabs:e.data.tabs,selectedItem:e.data.selectedItem,changeTab:e.changeTab};return m("div",{},m.module(tabbed,t,{list:e.list,code:e.code,actions:e.actions,changeTab:e.changeTab}))}};return e},r.demo.form=function(){var e={};return e.controller=function(e){this.model={store:m.prop(""),queries:m.prop(""),code:m.prop("")},this.results=m.prop(""),this.pass=m.prop(""),this.fail=m.prop(""),this.prefill=function(){this.model.store(r.booksString),this.model.queries("$..title"),this.model.code("this.results[0].reverse()")}.bind(this),this.save=function(){this.model.store()&&this.model.queries()&&this.model.code()?(this.results(p.proc(JSON.parse(this.model.store()),this.model.queries().split(","),this.model.code())),this.pass(!0),e.code("p.proc("+this.model.store()+",'"+this.model.queries().split(",")+"', '"+this.model.code()+"')"),e.list(this.results),e.changeTab("results")):this.fail(!0)}.bind(this)},e.view=function(e){return m(".form",[m.module(passFail(),{pass:e.pass,fail:e.fail,message:{pass:"yay!",fail:"boo!"}}),"Run p.proc(store,queries,code)",[m("button.warning",{onclick:e.prefill},"pre-fill sample"),m('textarea[placeholder="JSON data"]',{onchange:m.withAttr("value",e.model.store),value:e.model.store()}),m('input[placeholder="JSONPath queries (comma separated)"]',{onchange:m.withAttr("value",e.model.queries),value:e.model.queries()}),m('textarea[placeholder="JS Code Procedure block (this.results array)"]',{onchange:m.withAttr("value",e.model.code),value:e.model.code()}),m("button",{onclick:e.save},"Run")]])},e},r.demo.results=function(){var e={};return e.controller=function(){},e.view=function(e,t){return m(".results",[m("textarea",JSON.stringify(t.list())),m("textarea",t.code())])},e},t.exports=r},{"./tabs":"/Users/mglazer/Documents/code/praetor.js/src/scripts/comps/tabs.js",mithril:"/Users/mglazer/Documents/code/praetor.js/node_modules/mithril/mithril.js"}],"/Users/mglazer/Documents/code/praetor.js/src/scripts/comps/modal.js":[function(e,t){m=e("mithril");var r=function(){function e(){return m("button[type=button].close-modal",{onclick:r.visible.bind(this,!1)},"Close modal")}function t(t){return[m(".modal",m(".wrapper",[t(),e()]))]}var r={};return r.visible=m.prop(!1),r.view=function(e){return r.visible()?t(e):""},r};t.exports=r},{mithril:"/Users/mglazer/Documents/code/praetor.js/node_modules/mithril/mithril.js"}],"/Users/mglazer/Documents/code/praetor.js/src/scripts/comps/pass-fail.js":[function(e,t){m=e("mithril");var r=function(){var e={};return e.model={elementType:"button",className:".messages"},e.controller=function(t){this.elementType=t.elementType?t.elementType:e.model.elementType,this.className=t.className?t.className:e.model.className,this.message=t.message,this.pass=t.pass,this.fail=t.fail},e.view=function(e){var t=e.pass()?e.message.pass:e.fail()?e.message.fail:"",r=e.pass()?"success":"error";return t?m(e.elementType+e.className,{"class":r},t):m("")},e};t.exports=r},{mithril:"/Users/mglazer/Documents/code/praetor.js/node_modules/mithril/mithril.js"}],"/Users/mglazer/Documents/code/praetor.js/src/scripts/comps/tabs.js":[function(e,t){m=e("mithril");var r={};r.types={OBJECT:"[object Object]",ARRAY:"[object Array]",STRING:"[object String]",FUNCTION:"function"},r.type={}.toString,r.isFunction=function(e){return typeof e===r.types.FUNCTION?!0:!1},r.jsonPathValue=function(e){function t(e,t){return e[t]}return string.split(sep||".").reduce(t,e)};var n={controller:function(e){this.tabs=e.tabs,this.changeTab=e.changeTab},view:function(e,t,r){return m(".tabbed",m(".tabs",[n.tabs({tabs:e.tabs,selectedItem:t.selectedItem,onchange:e.changeTab})]),n.choose(t.selectedItem,e.tabs,r))}};n.tabs=function(e){return m("ul",e.tabs.map(function(t){return m("li",[n.tab(e,t.name)])}))},n.tab=function(e,t){return m("a",{"class":e.selectedItem==t?"selected":"",onclick:e.onchange.bind(this,t)},t)},n.choose=function(e,t,n){var o;t.forEach(function(t,r){return t.name==e&&(void 0===n.key&&(n.key=r),o=t.content)});var a=r.isFunction(o)?o():o;return m.module(a,n)},t.exports=n},{mithril:"/Users/mglazer/Documents/code/praetor.js/node_modules/mithril/mithril.js"}]},{},["./src/scripts/app.js"]);